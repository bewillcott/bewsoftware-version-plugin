# bewsoftware-version-plugin

**Note:**  
This project is a derivation of, and replacement for, another of my projects:
[simple-buildnumber-maven-plugin][sbmp].  All work on that project is therefore 
now suspended.

---

I am by nature, a lazy person.  I hate doing something more than once.  Which is 
probably why I became a programmer.  So, having to increment a build/version number 
every time it was needed, was becoming a major pain.  Sure, you could keep doing 
it the way you've always done it, _manually_, or you could be a little lazy and 
do it this way ...

This plugin has three goals:

- **build**
    - Update the `<increment>` component, if needed
    - Append suffix : `-SNAPSHOT`, if not already there
- **release**
    - Remove suffix : `-SNAPSHOT`, if there
- **help**
    - Auto-generated by build process

It updates the "&lt;project.version&gt;" text, where the formats of which are as 
follows:

- **build:** `<major>.<minor>.<increment>-SNAPSHOT`
- **release:** `<major>.<minor>.<increment>`

This new version is immediately available to the running build, and the updated
text is also written out to the "_pom.xml_" file for the project.


## Setup

The following is an example of how you can use this plugin.  It is the method that
I have used to build this project, with the only difference being the specific
version text for the plugin.

The benefit of this setup is that you don't have to do anything specific to activate
the plugin.  The profile **_release-profile_** is one that all Maven builds get
by default, so using it in this way is appropriate.  However, you could use any other
profile name you need, so that it fits within your specific build format.

```
<project>
    <properties>
        <skip.version.build>false</skip.version.build>
        ...
    </properties>
    ...
    <profiles>
        <profile>
            <id>release-profile</id>
            <properties>
                <skip.version.build>true</skip.version.build>
            </properties>
            <build>
                <plugins>                        
                    <plugin>                    
                        <groupId>com.bewsoftware.mojo</groupId>
                        <artifactId>bewsoftware-version-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>Release</id>
                                <goals>
                                    <goal>release</goal>
                                </goals>
                                <configuration>
                                    <finalBaseNamePropertyName>finalBaseName</finalBaseNamePropertyName>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    ...
                </plugins>
                ...
            </build>
            ...
        </profile>
        ...
    </profiles>
    ...
    <build>
        <pluginManagement>
            <plugins>                 
                <plugin>
                    <groupId>com.bewsoftware.mojo</groupId>
                    <artifactId>bewsoftware-version-plugin</artifactId>
                    <version>1.0.0</version>
                </plugin>
            </plugins>                 
        </pluginManagement>
        ...
        <plugins>
            <plugin>                    
                <groupId>com.bewsoftware.mojo</groupId>
                <artifactId>bewsoftware-version-plugin</artifactId>
                <executions>
                    <execution>
                        <id>Build</id>
                        <goals>
                            <goal>build</goal>
                        </goals>
                        <configuration>
                            <skip>${skip.version.build}</skip>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            ...
        </plugins>
        ...
    </build>
    ...
</project>

```

(_By the way. You could be really lazy, and just copy the relevant sections from above and paste them_
_directly into your `pom.xml` file.  The "..." are just place holders for the rest of your file's text._)


### Properties

These settings are available for both the **build** and **release** goals.

#### skip

To _skip_ an execution set this to true:  
`<skip>true</skip>`

**Default:** `false`.


#### finalBaseNamePropertyName

Set the property name of the returned value for the final base filename string.

This is an alternative to the `project.build.finalName` property which in some 
parts of the running build, cannot be updated by this plugin.  So, by using the 
property name you set here, you get the new filename version text that the 
_finalName_ property is set to.

For example to set it to `finalBaseName`:  
`<finalBaseNamePropertyName>finalBaseName</finalBaseNamePropertyName>`

which could then be used like this:  
`${project.build.directory}/${finalBaseName}.jar`

## See also

For more detailed information please refer to the manual under `./docs`.


[sbmp]:https://github.com/bewillcott/simple-buildnumber-maven-plugin
